!function(){function e(e,t,r){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return r}function t(e,t){!function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}var r=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],a=new WeakSet,n=new WeakSet,i=new WeakSet;function o(){this.board.forEach(function(e){return e.reverse()})}function s(){var e=this;this.board=this.board.map(function(t,r){for(var a=[],n=0;n<t.length;n++)a.push(e.board[n][r]);return a})}function c(){var e,t,r=this,a=Math.ceil(10*Math.random())>9?4:2,n=function(){return Math.floor(4*Math.random())},i=function(){e=n(),t=n(),0===r.board[e][t]?(r.board[e][t]=a,r.setBoard()):i()};i()}var l=new(function(){var l;function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,u),t(this,a),t(this,n),t(this,i),this.board=e,this.score=0,this.status="idle"}return l=[{key:"Slide",value:function(){for(var t=document.querySelector(".game-score"),r=0,a=this.board.map(function(e){return e.map(function(t,r){return e[r]})}),n=0;n<4;n++)for(var o=void 0,s=1;s<4;s++)if(this.board[n][s]>0){for(var l=0;0===this.board[n][s-l-1];)l++;this.board[n][s]===this.board[n][s-l-1]&&s-l-1!==o?(o=s-++l,this.board[n][s-l]=this.board[n][s]+this.board[n][s-l],r+=this.board[n][s-l]):this.board[n][s-l]=this.board[n][s],s-l!==s&&(this.board[n][s]=0),this.board.flat().includes(2048)&&(this.status="win")}JSON.stringify(this.board)!==JSON.stringify(a)&&(e(this,i,c).call(this),t.innerHTML="".concat(+t.innerHTML+r))}},{key:"moveLeft",value:function(){this.Slide(),this.setBoard()}},{key:"moveRight",value:function(){e(this,a,o).call(this),this.Slide(),e(this,a,o).call(this),this.setBoard()}},{key:"moveUp",value:function(){e(this,n,s).call(this),this.Slide(),e(this,n,s).call(this),this.setBoard()}},{key:"moveDown",value:function(){e(this,n,s).call(this),this.moveRight(),e(this,n,s).call(this),this.setBoard()}},{key:"getScore",value:function(){return this.score}},{key:"getState",value:function(){return this.board}},{key:"getStatus",value:function(){return this.status}},{key:"start",value:function(){this.status="playing",e(this,i,c).call(this),e(this,i,c).call(this)}},{key:"restart",value:function(){var e=document.querySelector(".game-score");this.board=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.start(),this.score=0,e.innerHTML=0}},{key:"setBoard",value:function(){for(var e=document.querySelectorAll(".field-cell"),t=0,r=0;r<4;r++)for(var a=0;a<4;a++){var n=this.board[r][a];0!==n?(e[t].textContent=n,e[t].className=" field-cell field-cell--".concat(n)):(e[t].className="field-cell",e[t].textContent=""),t++}}}],function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(u.prototype,l),u}()),u=document.querySelector(".button"),h=document.querySelector(".message-win"),d=document.querySelector(".message-lose"),f=document.querySelector(".message-start");function v(e){switch(e.key){case"ArrowUp":l.moveUp();break;case"ArrowRight":l.moveRight();break;case"ArrowDown":l.moveDown();break;case"ArrowLeft":l.moveLeft()}"win"===l.getStatus()&&(m(),h.classList.remove("hidden"),document.removeEventListener("keydown",v)),b()&&(m(),d.classList.remove("hidden"),document.removeEventListener("keydown",v))}var m=function(){h.className="message message-win hidden",f.className="message message-start hidden",d.className="message message-lose hidden"},b=function(){var e=!0,t=!1,r=void 0;try{for(var a,n=l.board.flat()[Symbol.iterator]();!(e=(a=n.next()).done);e=!0){var i=a.value;if(0===i)return!1}}catch(e){t=!0,r=e}finally{try{e||null==n.return||n.return()}finally{if(t)throw r}}for(var o=0;o<=3;o++)for(var s=0;s<=2;s++)if(l.board[o][s]===l.board[o][s+1])return!1;for(var c=0;c<=3;c++)for(var u=0;u<=2;u++)if(l.board[u][c]===l.board[u+1][c])return!1;return!0};u.addEventListener("click",function(){switch(l.getStatus()){case"idle":m(),u.innerHTML="restart",u.classList.replace("start","restart"),document.addEventListener("keydown",v),l.start();break;case"playing":case"win":case"lose":m(),l.restart()}})}();
//# sourceMappingURL=index.72e441bc.js.map
